<br>

<div class="p-grid">
  <div class="p-col-6">

  <div class="p-grid">
    <div class="p-col-4">
      <label class="ajusteLabel" for="fid">FID: </label>
    </div>
    <div class="p-col-4">
      {{fid}}
    </div>
  </div>

  <br><br>

  <div class="p-grid">
    <div class="p-col-4">
      <label class="ajusteLabel" for="client">Cliente: </label>
    </div>
    <div class="p-col-4">
      {{comprador.nomecliente}}
    </div>
  </div>

  </div>
  <div class="p-col-6">

  <div class="p-grid">
    <div class="p-col-4">
      <label class="ajusteLabel" for="cpf">CPF: </label>
    </div>
    <div class="p-col-4">
      {{comprador.cpfcnpj}}
    </div>
  </div>

  <div class="p-grid">
    <div class="p-col-4">
      <label class="ajusteLabel" for="empreend">Empreendimento: </label>
    </div>
    <div class="p-col-4">
      {{cadInfo.codempreendimento}}
    </div>
  </div>

  <div class="p-grid">
    <div class="p-col-4">
      <label class="ajusteLabel" for="unidade">Unidade: </label>
    </div>
    <div class="p-col-4">
      {{cadInfo.unidade}}
    </div>
  </div>

  </div>
</div>

<div class="p-grid">
  <div class="p-col-2">
    <label class="ajusteLabel" for="desc">Descrição: </label>
  </div>
  <div class="p-col-10">
    <textarea [cols]="100" [rows]="4" pInputTextarea name="descricao" [(ngModel)]="historicoAnalise.descricao"></textarea>
  </div>
</div>

<div class="p-grid">
  <div class="p-col-8">

    <div class="p-grid">
      <div class="p-col-3">
        <label class="ajusteLabel" for="fases">Fases: </label>
      </div>
      <div class="p-col-3" id="fases">
        <p-dropdown [options]="fases"  placeholder="Selecione..." optionLabel="fase" [autoWidth]="false" [style]="{'width': '100%'}"
        [(ngModel)]="historicoAnalise.numfase" (onChange)="changeFases($event)"></p-dropdown>
      </div>
    
      <div class="p-col-3">
        <label class="ajusteLabel" for="fases">Sinteses: </label>
      </div>

      <div class="p-col-3" id="fases">
        <i class="pi pi-spin pi-spinner" style="font-size: 3em" [hidden]="!loadSpin"></i>
        <p-dropdown  [options]="sinteses"  placeholder="Selecione..." optionLabel="sintese" [autoWidth]="false" [style]="{'width': '100%'}"
         [(ngModel)]="historicoAnalise.numsintese"  (onChange)="changeSintese($event)" [disabled]="disabledSintese" [hidden]="loadSpin">
        </p-dropdown>
      </div>
    </div>
  </div>
  <div class="p-col-4">
    <br><br>

    <button pButton type="button" label="Limpar" class="ui-button-warning" 
    [ngStyle]="{'width': '90px', 'height':'30px', 'margin': '3px'}" icon="pi pi-refresh" iconPos="right"></button>
    <button pButton type="button" (click)="salvar(historicoAnalise)" label="Salvar" class=" ui-button-success" 
    [ngStyle]="{'width': '90px', 'height': '30px', 'margin': '3px'}" icon="pi pi-save" iconPos="right"></button>

  </div>
</div>
<p-messages [(value)]="msgs"></p-messages>

<div class="p-grid" [ngStyle]="{'height': '3px', 'background-color': 'black'}"></div>
<br>
<div class="p-grid p-justify-center">
  <div class="p-grid" [hidden]="!loadTable" style="padding: 25px;">
      <i class="pi pi-spin pi-spinner" style="font-size: 10em"></i>
  </div>

  <div [hidden]="loadTable">
    <p-table [value]="historicoAnalises" [scrollable]="true" scrollHeight="200px">
      <ng-template pTemplate="header">
        <tr>
          <th class="tddata">Data</th>
          <th class="tdusuario" >Usuário</th>
          <th class="tdfase" >Fase</th>
          <th class="tdsintese" >Sinteses</th>
          <th class="tddescricao">Descrição</th>   
        </tr>
      </ng-template>
  
      <ng-template pTemplate="body" let-hist>
        <tr>
          <td class="tddata">{{hist.datahistorico | date :  "dd/MM/y"}}</td>
          <td class="tdusuario" > {{hist.codusuario}} </td>
          <td class="tdfase"> {{hist.numfase.fase}}</td>
          <td class="tdsintese" > {{hist.numsintese.sintese}} </td>
          <td class="tddescricao"> {{hist.descricao}} </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>